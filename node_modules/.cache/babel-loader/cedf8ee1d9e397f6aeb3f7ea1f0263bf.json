{"ast":null,"code":"import { call, fork, put, take } from 'redux-saga/effects';\nimport { authActions } from './authSlice';\n\nfunction* handleLogin(payload) {\n  try {\n    // call api login;\n    localStorage.setItem(\"accessToken\", 'ânfafnfan');\n    yield put(authActions.loginSucces({\n      id: 1,\n      name: 'Hoang',\n      email: 'absc'\n    }));\n  } catch (err) {\n    yield put(authActions.loginFailed(err.message));\n  }\n}\n\nfunction* handleLogOut() {}\n\nfunction* handleLoginFlow() {\n  while (true) {\n    const isLoggedIn = localStorage.getItem('accessToken');\n\n    if (isLoggedIn) {\n      yield take(authActions.logOut.type);\n      yield fork(handleLogOut);\n    }\n\n    const action = yield take(authActions.login.type);\n    yield call(handleLogin, action.payload);\n  }\n}\n\nexport default function* authSage() {\n  yield call(handleLoginFlow);\n}","map":{"version":3,"names":["call","fork","put","take","authActions","handleLogin","payload","localStorage","setItem","loginSucces","id","name","email","err","loginFailed","message","handleLogOut","handleLoginFlow","isLoggedIn","getItem","logOut","type","action","login","authSage"],"sources":["C:/Workspace/INTERN/react-saga/src/features/auth/authSaga.ts"],"sourcesContent":["import { PayloadAction } from '@reduxjs/toolkit';\r\nimport { call, fork, put, take } from 'redux-saga/effects';\r\nimport { authActions, PayLoadState } from './authSlice';\r\n\r\nfunction* handleLogin(payload: PayLoadState) {\r\n\ttry {\r\n\t\t// call api login;\r\n\t\tlocalStorage.setItem(\"accessToken\",'ânfafnfan');\r\n\t\tyield put(authActions.loginSucces({\r\n\t\t\tid:1,\r\n\t\t\tname:'Hoang',\r\n\t\t\temail:'absc'\r\n\t\t}))\r\n\t}catch (err) {\r\n\t\tyield put(authActions.loginFailed(err.message))\r\n\t}\r\n\r\n}\r\nfunction* handleLogOut() {\r\n\t\r\n}\r\nfunction* handleLoginFlow() {\r\n\twhile (true) {\r\n\t\tconst isLoggedIn = localStorage.getItem('accessToken');\r\n\t\tif (isLoggedIn) {\r\n\t\t\tyield take(authActions.logOut.type);\r\n\t\t\tyield fork(handleLogOut);\r\n\t\t}\r\n\t\tconst action: PayloadAction<PayLoadState> = yield take(authActions.login.type);\r\n\t\tyield call(handleLogin, action.payload);\r\n\t}\r\n}\r\n\r\nexport default function* authSage() {\r\n\tyield call(handleLoginFlow);\r\n}\r\n"],"mappings":"AACA,SAASA,IAAT,EAAeC,IAAf,EAAqBC,GAArB,EAA0BC,IAA1B,QAAsC,oBAAtC;AACA,SAASC,WAAT,QAA0C,aAA1C;;AAEA,UAAUC,WAAV,CAAsBC,OAAtB,EAA6C;EAC5C,IAAI;IACH;IACAC,YAAY,CAACC,OAAb,CAAqB,aAArB,EAAmC,WAAnC;IACA,MAAMN,GAAG,CAACE,WAAW,CAACK,WAAZ,CAAwB;MACjCC,EAAE,EAAC,CAD8B;MAEjCC,IAAI,EAAC,OAF4B;MAGjCC,KAAK,EAAC;IAH2B,CAAxB,CAAD,CAAT;EAKA,CARD,CAQC,OAAOC,GAAP,EAAY;IACZ,MAAMX,GAAG,CAACE,WAAW,CAACU,WAAZ,CAAwBD,GAAG,CAACE,OAA5B,CAAD,CAAT;EACA;AAED;;AACD,UAAUC,YAAV,GAAyB,CAExB;;AACD,UAAUC,eAAV,GAA4B;EAC3B,OAAO,IAAP,EAAa;IACZ,MAAMC,UAAU,GAAGX,YAAY,CAACY,OAAb,CAAqB,aAArB,CAAnB;;IACA,IAAID,UAAJ,EAAgB;MACf,MAAMf,IAAI,CAACC,WAAW,CAACgB,MAAZ,CAAmBC,IAApB,CAAV;MACA,MAAMpB,IAAI,CAACe,YAAD,CAAV;IACA;;IACD,MAAMM,MAAmC,GAAG,MAAMnB,IAAI,CAACC,WAAW,CAACmB,KAAZ,CAAkBF,IAAnB,CAAtD;IACA,MAAMrB,IAAI,CAACK,WAAD,EAAciB,MAAM,CAAChB,OAArB,CAAV;EACA;AACD;;AAED,eAAe,UAAUkB,QAAV,GAAqB;EACnC,MAAMxB,IAAI,CAACiB,eAAD,CAAV;AACA"},"metadata":{},"sourceType":"module"}